<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/stilos.css">
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <title>Ventas</title>
</head>
<body>
    <ul>
        <li class="linkslogout" id="logout"><a class="logosredes" href="/auth/logout">Logout</a></li>
    </ul>
    <br>
    <div>
        <h1 class="amor">Accediste a tus ventas, Amorcito</h1>
    </div>
    <br>
    <div class="formTabla" id="checkboxForm">
        <form action="/ventas" method="post">
            <div id="table-container" class="table-container">
                <p id="array" style="display: none;"><%= array %></p>
            </div>
            <div class="floating">
                <button class="button" type="submit">Listos para despachar</button>
            </div>
        </form>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
<script src="/js/table.js" type="text/javascript"></script>
<script>
    document.getElementById('checkboxForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const checkedValues = [];
        const checkboxes = document.querySelectorAll('input[class="checkbox"]:checked');

        checkboxes.forEach(function(checkbox){
            checkedValues.push(checkbox.id);
        });

        fetch('/ventas', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ selectedOptions: checkedValues })
        })
        .then(response => location.reload())
        .catch(error => console.log('Error: ', error));
    });
</script>
</body>
</html>